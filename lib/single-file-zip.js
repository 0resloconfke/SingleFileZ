const{Array:t,Object:e,String:n,BigInt:r,Math:s,Date:a,Map:i,URL:o,Error:c,Uint8Array:l,Uint16Array:h,Uint32Array:d,DataView:f,Blob:u,Promise:p,TextEncoder:g,TextDecoder:w,document:y,crypto:m,btoa:b,TransformStream:v,ReadableStream:k,WritableStream:z,CompressionStream:_,DecompressionStream:S,navigator:x}=globalThis,D={chunkSize:524288,maxWorkers:void 0!==x&&x.hardwareConcurrency||2,terminateWorkerTimeout:5e3,useWebWorkers:!0,workerScripts:void 0},A=e.assign({},D);function F(){return A}function T(e){if(void 0!==e.baseURL&&(A.baseURL=e.baseURL),void 0!==e.chunkSize&&(A.chunkSize=e.chunkSize),void 0!==e.maxWorkers&&(A.maxWorkers=e.maxWorkers),void 0!==e.terminateWorkerTimeout&&(A.terminateWorkerTimeout=e.terminateWorkerTimeout),void 0!==e.useWebWorkers&&(A.useWebWorkers=e.useWebWorkers),void 0!==e.Deflate&&(A.Deflate=e.Deflate),void 0!==e.Inflate&&(A.Inflate=e.Inflate),void 0!==e.workerScripts){if(e.workerScripts.deflate){if(!t.isArray(e.workerScripts.deflate))throw new c("workerScripts.deflate must be an array");A.workerScripts||(A.workerScripts={}),A.workerScripts.deflate=e.workerScripts.deflate}if(e.workerScripts.inflate){if(!t.isArray(e.workerScripts.inflate))throw new c("workerScripts.inflate must be an array");A.workerScripts||(A.workerScripts={}),A.workerScripts.inflate=e.workerScripts.inflate}}}function R(){return"application/octet-stream"}var E=(t,e={},n)=>({Deflate:C(t.Deflate,e.deflate,n),Inflate:C(t.Inflate,e.inflate,n)});function C(t,n,r){return class{constructor(s){const a=this;a.codec=new t(e.assign({},n,s)),r(a.codec,(t=>{if(a.pendingData){const e=a.pendingData;a.pendingData=new l(e.length+t.length),a.pendingData.set(e,0),a.pendingData.set(t,e.length)}else a.pendingData=new l(t)}))}append(t){return this.codec.push(t),s(this)}flush(){return this.codec.push(new l(0),!0),s(this)}};function s(t){if(t.pendingData){const e=t.pendingData;return t.pendingData=null,e}return new l(0)}}const B=[];for(let t=0;t<256;t++){let e=t;for(let t=0;t<8;t++)1&e?e=e>>>1^3988292384:e>>>=1;B[t]=e}class U{constructor(t){this.crc=t||-1}append(t){let e=0|this.crc;for(let n=0,r=0|t.length;n<r;n++)e=e>>>8^B[255&(e^t[n])];this.crc=e}get(){return~this.crc}}function W(t){if(void 0===g){t=unescape(encodeURIComponent(t));const e=new l(t.length);for(let n=0;n<e.length;n++)e[n]=t.charCodeAt(n);return e}return(new g).encode(t)}const H={concat(t,e){if(0===t.length||0===e.length)return t.concat(e);const n=t[t.length-1],r=H.getPartial(n);return 32===r?t.concat(e):H._shiftRight(e,r,0|n,t.slice(0,t.length-1))},bitLength(t){const e=t.length;if(0===e)return 0;const n=t[e-1];return 32*(e-1)+H.getPartial(n)},clamp(t,e){if(32*t.length<e)return t;const n=(t=t.slice(0,s.ceil(e/32))).length;return e&=31,n>0&&e&&(t[n-1]=H.partial(e,t[n-1]&2147483648>>e-1,1)),t},partial:(t,e,n)=>32===t?e:(n?0|e:e<<32-t)+1099511627776*t,getPartial:t=>s.round(t/1099511627776)||32,_shiftRight(t,e,n,r){for(void 0===r&&(r=[]);e>=32;e-=32)r.push(n),n=0;if(0===e)return r.concat(t);for(let s=0;s<t.length;s++)r.push(n|t[s]>>>e),n=t[s]<<32-e;const s=t.length?t[t.length-1]:0,a=H.getPartial(s);return r.push(H.partial(e+a&31,e+a>32?n:r.pop(),1)),r}},I={bytes:{fromBits(t){const e=H.bitLength(t)/8,n=new l(e);let r;for(let s=0;s<e;s++)0==(3&s)&&(r=t[s/4]),n[s]=r>>>24,r<<=8;return n},toBits(t){const e=[];let n,r=0;for(n=0;n<t.length;n++)r=r<<8|t[n],3==(3&n)&&(e.push(r),r=0);return 3&n&&e.push(H.partial(8*(3&n),r)),e}}},M={sha1:function(t){t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()}};M.sha1.prototype={blockSize:512,reset:function(){const t=this;return t._h=this._init.slice(0),t._buffer=[],t._length=0,t},update:function(t){const e=this;"string"==typeof t&&(t=I.utf8String.toBits(t));const n=e._buffer=H.concat(e._buffer,t),r=e._length,s=e._length=r+H.bitLength(t);if(s>9007199254740991)throw new c("Cannot hash more than 2^53 - 1 bits");const a=new d(n);let i=0;for(let t=e.blockSize+r-(e.blockSize+r&e.blockSize-1);t<=s;t+=e.blockSize)e._block(a.subarray(16*i,16*(i+1))),i+=1;return n.splice(0,16*i),e},finalize:function(){const t=this;let e=t._buffer;const n=t._h;e=H.concat(e,[H.partial(1,1)]);for(let t=e.length+2;15&t;t++)e.push(0);for(e.push(s.floor(t._length/4294967296)),e.push(0|t._length);e.length;)t._block(e.splice(0,16));return t.reset(),n},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(t,e,n,r){return t<=19?e&n|~e&r:t<=39?e^n^r:t<=59?e&n|e&r|n&r:t<=79?e^n^r:void 0},_S:function(t,e){return e<<t|e>>>32-t},_block:function(e){const n=this,r=n._h,a=t(80);for(let t=0;t<16;t++)a[t]=e[t];let i=r[0],o=r[1],c=r[2],l=r[3],h=r[4];for(let t=0;t<=79;t++){t>=16&&(a[t]=n._S(1,a[t-3]^a[t-8]^a[t-14]^a[t-16]));const e=n._S(5,i)+n._f(t,o,c,l)+h+a[t]+n._key[s.floor(t/20)]|0;h=l,l=c,c=n._S(30,o),o=i,i=e}r[0]=r[0]+i|0,r[1]=r[1]+o|0,r[2]=r[2]+c|0,r[3]=r[3]+l|0,r[4]=r[4]+h|0}};const L={aes:class{constructor(t){const e=this;e._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],e._tables[0][0][0]||e._precompute();const n=e._tables[0][4],r=e._tables[1],s=t.length;let a,i,o,l=1;if(4!==s&&6!==s&&8!==s)throw new c("invalid aes key size");for(e._key=[i=t.slice(0),o=[]],a=s;a<4*s+28;a++){let t=i[a-1];(a%s==0||8===s&&a%s==4)&&(t=n[t>>>24]<<24^n[t>>16&255]<<16^n[t>>8&255]<<8^n[255&t],a%s==0&&(t=t<<8^t>>>24^l<<24,l=l<<1^283*(l>>7))),i[a]=i[a-s]^t}for(let t=0;a;t++,a--){const e=i[3&t?a:a-4];o[t]=a<=4||t<4?e:r[0][n[e>>>24]]^r[1][n[e>>16&255]]^r[2][n[e>>8&255]]^r[3][n[255&e]]}}encrypt(t){return this._crypt(t,0)}decrypt(t){return this._crypt(t,1)}_precompute(){const t=this._tables[0],e=this._tables[1],n=t[4],r=e[4],s=[],a=[];let i,o,c,l;for(let t=0;t<256;t++)a[(s[t]=t<<1^283*(t>>7))^t]=t;for(let h=i=0;!n[h];h^=o||1,i=a[i]||1){let a=i^i<<1^i<<2^i<<3^i<<4;a=a>>8^255&a^99,n[h]=a,r[a]=h,l=s[c=s[o=s[h]]];let d=16843009*l^65537*c^257*o^16843008*h,f=257*s[a]^16843008*a;for(let n=0;n<4;n++)t[n][h]=f=f<<24^f>>>8,e[n][a]=d=d<<24^d>>>8}for(let n=0;n<5;n++)t[n]=t[n].slice(0),e[n]=e[n].slice(0)}_crypt(t,e){if(4!==t.length)throw new c("invalid aes block size");const n=this._key[e],r=n.length/4-2,s=[0,0,0,0],a=this._tables[e],i=a[0],o=a[1],l=a[2],h=a[3],d=a[4];let f,u,p,g=t[0]^n[0],w=t[e?3:1]^n[1],y=t[2]^n[2],m=t[e?1:3]^n[3],b=4;for(let t=0;t<r;t++)f=i[g>>>24]^o[w>>16&255]^l[y>>8&255]^h[255&m]^n[b],u=i[w>>>24]^o[y>>16&255]^l[m>>8&255]^h[255&g]^n[b+1],p=i[y>>>24]^o[m>>16&255]^l[g>>8&255]^h[255&w]^n[b+2],m=i[m>>>24]^o[g>>16&255]^l[w>>8&255]^h[255&y]^n[b+3],b+=4,g=f,w=u,y=p;for(let t=0;t<4;t++)s[e?3&-t:t]=d[g>>>24]<<24^d[w>>16&255]<<16^d[y>>8&255]<<8^d[255&m]^n[b++],f=g,g=w,w=y,y=m,m=f;return s}}},V={getRandomValues(t){const e=new d(t.buffer),n=t=>{let e=987654321;const n=4294967295;return function(){e=36969*(65535&e)+(e>>16)&n;return(((e<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n)/4294967296+.5)*(s.random()>.5?1:-1)}};for(let r,a=0;a<t.length;a+=4){const t=n(4294967296*(r||s.random()));r=987654071*t(),e[a/4]=4294967296*t()|0}return t}},K={ctrGladman:class{constructor(t,e){this._prf=t,this._initIv=e,this._iv=e}reset(){this._iv=this._initIv}update(t){return this.calculate(this._prf,t,this._iv)}incWord(t){if(255==(t>>24&255)){let e=t>>16&255,n=t>>8&255,r=255&t;255===e?(e=0,255===n?(n=0,255===r?r=0:++r):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=r}else t+=1<<24;return t}incCounter(t){0===(t[0]=this.incWord(t[0]))&&(t[1]=this.incWord(t[1]))}calculate(t,e,n){let r;if(!(r=e.length))return[];const s=H.bitLength(e);for(let s=0;s<r;s+=4){this.incCounter(n);const r=t.encrypt(n);e[s]^=r[0],e[s+1]^=r[1],e[s+2]^=r[2],e[s+3]^=r[3]}return H.clamp(e,s)}}},P={importKey:t=>new P.hmacSha1(I.bytes.toBits(t)),pbkdf2(t,e,n,r){if(n=n||1e4,r<0||n<0)throw new c("invalid params to pbkdf2");const s=1+(r>>5)<<2;let a,i,o,l,h;const d=new ArrayBuffer(s),u=new f(d);let p=0;const g=H;for(e=I.bytes.toBits(e),h=1;p<(s||1);h++){for(a=i=t.encrypt(g.concat(e,[h])),o=1;o<n;o++)for(i=t.encrypt(i),l=0;l<i.length;l++)a[l]^=i[l];for(o=0;p<(s||1)&&o<a.length;o++)u.setInt32(p,a[o]),p+=4}return d.slice(0,r/8)},hmacSha1:class{constructor(t){const e=this,n=e._hash=M.sha1,r=[[],[]],s=n.prototype.blockSize/32;e._baseHash=[new n,new n],t.length>s&&(t=n.hash(t));for(let e=0;e<s;e++)r[0][e]=909522486^t[e],r[1][e]=1549556828^t[e];e._baseHash[0].update(r[0]),e._baseHash[1].update(r[1]),e._resultHash=new n(e._baseHash[0])}reset(){const t=this;t._resultHash=new t._hash(t._baseHash[0]),t._updated=!1}update(t){this._updated=!0,this._resultHash.update(t)}digest(){const t=this,e=t._resultHash.finalize(),n=new t._hash(t._baseHash[1]).update(e).finalize();return t.reset(),n}encrypt(t){if(this._updated)throw new c("encrypt on already updated hmac called!");return this.update(t),this.digest(t)}}},G="Invalid pasword",O={name:"PBKDF2"},q=e.assign({hash:{name:"HMAC"}},O),N=e.assign({iterations:1e3,hash:{name:"SHA-1"}},O),Z=["deriveBits"],j=[8,12,16],Y=[16,24,32],X=[0,0,0,0],J=void 0!==m,Q=J&&void 0!==m.subtle,$=I.bytes,tt=L.aes,et=K.ctrGladman,nt=P.hmacSha1;class rt{constructor(t,n,r){e.assign(this,{password:t,signed:n,strength:r-1,pendingInput:new l(0)})}async append(e){const n=this;if(n.password){const r=ct(e,0,j[n.strength]+2);await async function(t,e,n){await it(t,n,ct(e,0,j[t.strength]));const r=ct(e,j[t.strength]),s=t.keys.passwordVerification;if(s[0]!=r[0]||s[1]!=r[1])throw new c("Invalid pasword")}(n,r,n.password),n.password=null,n.aesCtrGladman=new et(new tt(n.keys.key),t.from(X)),n.hmac=new nt(n.keys.authentication),e=ct(e,j[n.strength]+2)}return at(n,e,new l(e.length-10-(e.length-10)%16),0,10,!0)}flush(){const t=this,e=t.pendingInput,n=ct(e,0,e.length-10),r=ct(e,e.length-10);let s=new l(0);if(n.length){const e=$.toBits(n);t.hmac.update(e);const r=t.aesCtrGladman.update(e);s=$.fromBits(r)}let a=!0;if(t.signed){const e=ct($.fromBits(t.hmac.digest()),0,10);for(let t=0;t<10;t++)e[t]!=r[t]&&(a=!1)}return{valid:a,data:s}}}class st{constructor(t,n){e.assign(this,{password:t,strength:n-1,pendingInput:new l(0)})}async append(e){const n=this;let r=new l(0);n.password&&(r=await async function(t,e){const n=(r=new l(j[t.strength]),J&&"function"==typeof m.getRandomValues?m.getRandomValues(r):V.getRandomValues(r));var r;return await it(t,e,n),ot(n,t.keys.passwordVerification)}(n,n.password),n.password=null,n.aesCtrGladman=new et(new tt(n.keys.key),t.from(X)),n.hmac=new nt(n.keys.authentication));const s=new l(r.length+e.length-e.length%16);return s.set(r,0),at(n,e,s,r.length,0)}flush(){const t=this;let e=new l(0);if(t.pendingInput.length){const n=t.aesCtrGladman.update($.toBits(t.pendingInput));t.hmac.update(n),e=$.fromBits(n)}const n=ct($.fromBits(t.hmac.digest()),0,10);return{data:ot(e,n),signature:n}}}function at(t,e,n,r,s,a){const i=e.length-s;let o;for(t.pendingInput.length&&(e=ot(t.pendingInput,e),n=function(t,e){if(e&&e>t.length){const n=t;(t=new l(e)).set(n,0)}return t}(n,i-i%16)),o=0;o<=i-16;o+=16){const s=$.toBits(ct(e,o,o+16));a&&t.hmac.update(s);const i=t.aesCtrGladman.update(s);a||t.hmac.update(i),n.set($.fromBits(i),o+r)}return t.pendingInput=ct(e,o),n}async function it(t,n,r){const s=W(n),a=await function(t,e,n,r,s){return J&&Q&&"function"==typeof m.subtle.importKey?m.subtle.importKey(t,e,n,r,s):P.importKey(e)}("raw",s,q,!1,Z),i=await async function(t,e,n){return J&&Q&&"function"==typeof m.subtle.deriveBits?await m.subtle.deriveBits(t,e,n):P.pbkdf2(e,t.salt,N.iterations,n)}(e.assign({salt:r},N),a,8*(2*Y[t.strength]+2)),o=new l(i);t.keys={key:$.toBits(ct(o,0,Y[t.strength])),authentication:$.toBits(ct(o,Y[t.strength],2*Y[t.strength])),passwordVerification:ct(o,2*Y[t.strength])}}function ot(t,e){let n=t;return t.length+e.length&&(n=new l(t.length+e.length),n.set(t,0),n.set(e,t.length)),n}function ct(t,e,n){return t.subarray(e,n)}class lt{constructor(t,n){e.assign(this,{password:t,passwordVerification:n}),ut(this,t)}append(t){const e=this;if(e.password){const n=dt(e,t.subarray(0,12));if(e.password=null,n[11]!=e.passwordVerification)throw new c("Invalid pasword");t=t.subarray(12)}return dt(e,t)}flush(){return{valid:!0,data:new l(0)}}}class ht{constructor(t,n){e.assign(this,{password:t,passwordVerification:n}),ut(this,t)}append(t){const e=this;let n,r;if(e.password){e.password=null;const s=m.getRandomValues(new l(12));s[11]=e.passwordVerification,n=new l(t.length+s.length),n.set(ft(e,s),0),r=12}else n=new l(t.length),r=0;return n.set(ft(e,t),r),n}flush(){return{data:new l(0)}}}function dt(t,e){const n=new l(e.length);for(let r=0;r<e.length;r++)n[r]=gt(t)^e[r],pt(t,n[r]);return n}function ft(t,e){const n=new l(e.length);for(let r=0;r<e.length;r++)n[r]=gt(t)^e[r],pt(t,e[r]);return n}function ut(t,e){t.keys=[305419896,591751049,878082192],t.crcKey0=new U(t.keys[0]),t.crcKey2=new U(t.keys[2]);for(let n=0;n<e.length;n++)pt(t,e.charCodeAt(n))}function pt(t,e){t.crcKey0.append([e]),t.keys[0]=~t.crcKey0.get(),t.keys[1]=yt(t.keys[1]+wt(t.keys[0])),t.keys[1]=yt(s.imul(t.keys[1],134775813)+1),t.crcKey2.append([t.keys[1]>>>24]),t.keys[2]=~t.crcKey2.get()}function gt(t){const e=2|t.keys[2];return wt(s.imul(e,1^e)>>>8)}function wt(t){return 255&t}function yt(t){return 4294967295&t}const mt="Invalid signature";class bt{constructor(t,{signature:n,password:r,signed:s,compressed:a,zipCrypto:i,passwordVerification:o,encryptionStrength:c},{chunkSize:l}){const h=Boolean(r);e.assign(this,{signature:n,encrypted:h,signed:s,compressed:a,inflate:a&&new t({chunkSize:l}),crc32:s&&new U,zipCrypto:i,decrypt:h&&i?new lt(r,o):new rt(r,s,c)})}async append(t){const e=this;return e.encrypted&&t.length&&(t=await e.decrypt.append(t)),e.compressed&&t.length&&(t=await e.inflate.append(t)),(!e.encrypted||e.zipCrypto)&&e.signed&&t.length&&e.crc32.append(t),t}async flush(){const t=this;let e,n=new l(0);if(t.encrypted){const e=t.decrypt.flush();if(!e.valid)throw new c("Invalid signature");n=e.data}if((!t.encrypted||t.zipCrypto)&&t.signed){const n=new f(new l(4).buffer);if(e=t.crc32.get(),n.setUint32(0,e),t.signature!=n.getUint32(0,!1))throw new c("Invalid signature")}return t.compressed&&(n=await t.inflate.append(n)||new l(0),await t.inflate.flush()),{data:n,signature:e}}}class vt{constructor(t,{encrypted:n,signed:r,compressed:s,level:a,zipCrypto:i,password:o,passwordVerification:c,encryptionStrength:l},{chunkSize:h}){e.assign(this,{encrypted:n,signed:r,compressed:s,deflate:s&&new t({level:a||5,chunkSize:h}),crc32:r&&new U,zipCrypto:i,encrypt:n&&i?new ht(o,c):new st(o,l)})}async append(t){const e=this;let n=t;return e.compressed&&t.length&&(n=await e.deflate.append(t)),e.encrypted&&n.length&&(n=await e.encrypt.append(n)),(!e.encrypted||e.zipCrypto)&&e.signed&&t.length&&e.crc32.append(t),n}async flush(){const t=this;let e,n=new l(0);if(t.compressed&&(n=await t.deflate.flush()||new l(0)),t.encrypted){n=await t.encrypt.append(n);const r=t.encrypt.flush();e=r.signature;const s=new l(n.length+r.data.length);s.set(n,0),s.set(r.data,n.length),n=s}return t.encrypted&&!t.zipCrypto||!t.signed||(e=t.crc32.get()),{data:n,signature:e}}}let kt=!0;var zt=(t,n,r,s,a,i,h)=>(e.assign(t,{busy:!0,codecConstructor:n,options:e.assign({},r),scripts:h,terminate(){t.worker&&!t.busy&&(t.worker.terminate(),t.interface=null)},onTaskFinished(){t.busy=!1,a(t)}}),i?function(t,e){let n;const r={type:"module"};if(!t.interface){if(kt)try{t.worker=s({},e.baseURL)}catch(n){kt=!1,t.worker=s(r,e.baseURL)}else t.worker=s(r,e.baseURL);t.worker.addEventListener("message",h,!1),t.interface={append:t=>a({type:"append",data:t}),flush:()=>a({type:"flush"}),abort(){t.onTaskFinished()}}}return t.interface;function s(e,n){let r,s;r=t.scripts[0],"function"==typeof r&&(r=r());try{s=new o(r,n)}catch(t){s=r}return new Worker(s,e)}async function a(r){if(!n){const n=t.options,r=t.scripts.slice(1);await i({scripts:r,type:"init",options:n,config:{chunkSize:e.chunkSize}})}return i(r)}function i(e){const r=t.worker,s=new p(((t,e)=>n={resolve:t,reject:e}));try{if(e.data)try{e.data=e.data.buffer,r.postMessage(e,[e.data])}catch(t){r.postMessage(e)}else r.postMessage(e)}catch(e){n.reject(e),n=null,t.onTaskFinished()}return s}function h(e){const r=e.data;if(n){const e=r.error,s=r.type;if(e){const r=new c(e.message);r.stack=e.stack,n.reject(r),n=null,t.onTaskFinished()}else if("init"==s||"flush"==s||"append"==s){const e=r.data;"flush"==s?(n.resolve({data:new l(e),signature:r.signature}),n=null,t.onTaskFinished()):n.resolve(e&&new l(e))}}}}(t,s):function(t,e){const n=function(t,e,n){return e.codecType.startsWith("deflate")?new vt(t,e,n):e.codecType.startsWith("inflate")?new bt(t,e,n):void 0}(t.codecConstructor,t.options,e);return{async append(e){try{return await n.append(e)}catch(e){throw t.onTaskFinished(),e}},async flush(){try{return await n.flush()}finally{t.onTaskFinished()}},abort(){t.onTaskFinished()}}}(t,s));let _t=[];const St=[];function xt(t,e,n){const r=!(!e.compressed&&!e.signed&&!e.encrypted)&&(e.useWebWorkers||void 0===e.useWebWorkers&&n.useWebWorkers),s=r&&n.workerScripts?n.workerScripts[e.codecType]:[];if(_t.length<n.maxWorkers){const i={};return _t.push(i),zt(i,t,e,n,a,r,s)}{const i=_t.find((t=>!t.busy));return i?(Dt(i),zt(i,t,e,n,a,r,s)):new p((n=>St.push({resolve:n,codecConstructor:t,options:e,webWorker:r,scripts:s})))}function a(t){if(St.length){const[{resolve:e,codecConstructor:r,options:s,webWorker:i,scripts:o}]=St.splice(0,1);e(zt(t,r,s,n,a,i,o))}else t.worker?(Dt(t),Number.isFinite(n.terminateWorkerTimeout)&&n.terminateWorkerTimeout>=0&&(t.terminateTimeout=setTimeout((()=>{_t=_t.filter((e=>e!=t)),t.terminate()}),n.terminateWorkerTimeout))):_t=_t.filter((e=>e!=t))}}function Dt(t){t.terminateTimeout&&(clearTimeout(t.terminateTimeout),t.terminateTimeout=null)}function At(){_t.forEach((t=>{Dt(t),t.terminate()}))}const Ft="Abort error";async function Tt(t,e,n,r,a,i,o){const c=s.max(i.chunkSize,64);return async function i(l=0,h=0){const d=o.signal,f=a();if(l<f){Rt(d,t);const a=await e.readUint8Array(l+r,s.min(c,f-l)),u=a.length;Rt(d,t);const p=await t.append(a);if(Rt(d,t),h+=await Et(n,p),o.onprogress)try{o.onprogress(l+u,f)}catch(t){}return i(l+c,h)}{const e=await t.flush();return h+=await Et(n,e.data),{signature:e.signature,length:h}}}()}function Rt(t,e){if(t&&t.aborted)throw e.abort(),new c("Abort error")}async function Et(t,e){return e.length&&await t.writeUint8Array(e),e.length}const Ct="HTTP Range not supported",Bt="Reader is not seekable";class Ut{constructor(){this.size=0}init(){this.initialized=!0}}class Wt extends Ut{}class Ht extends Ut{writeUint8Array(t){this.size+=t.length}}class It extends Wt{constructor(t){super(),this.blobReader=new Kt(new u([t],{type:"text/plain"}))}init(){super.init(),this.blobReader.init(),this.size=this.blobReader.size}readUint8Array(t,e){return this.blobReader.readUint8Array(t,e)}}class Mt extends Ht{constructor(t){super(),this.encoding=t,this.blob=new u([],{type:"text/plain"})}writeUint8Array(t){super.writeUint8Array(t),this.blob=new u([this.blob,t.buffer],{type:"text/plain"})}getData(){if(this.blob.text)return this.blob.text();{const t=new FileReader;return new p(((e,n)=>{t.onload=t=>e(t.target.result),t.onerror=()=>n(t.error),t.readAsText(this.blob,this.encoding)}))}}}class Lt extends Wt{constructor(t){super(),this.dataURI=t;let e=t.length;for(;"="==t.charAt(e-1);)e--;this.dataStart=t.indexOf(",")+1,this.size=s.floor(.75*(e-this.dataStart))}readUint8Array(t,e){const n=new l(e),r=4*s.floor(t/3),a=atob(this.dataURI.substring(r+this.dataStart,4*s.ceil((t+e)/3)+this.dataStart)),i=t-3*s.floor(r/4);for(let t=i;t<i+e;t++)n[t-i]=a.charCodeAt(t);return n}}class Vt extends Ht{constructor(t){super(),this.data="data:"+(t||"")+";base64,",this.pending=[]}writeUint8Array(t){super.writeUint8Array(t);let e=0,r=this.pending;const a=this.pending.length;for(this.pending="",e=0;e<3*s.floor((a+t.length)/3)-a;e++)r+=n.fromCharCode(t[e]);for(;e<t.length;e++)this.pending+=n.fromCharCode(t[e]);r.length>2?this.data+=b(r):this.pending=r}getData(){return this.data+b(this.pending)}}class Kt extends Wt{constructor(t){super(),this.blob=t,this.size=t.size}async readUint8Array(t,e){if(this.blob.arrayBuffer)return new l(await this.blob.slice(t,t+e).arrayBuffer());{const n=new FileReader;return new p(((r,s)=>{n.onload=t=>r(new l(t.target.result)),n.onerror=()=>s(n.error),n.readAsArrayBuffer(this.blob.slice(t,t+e))}))}}}class Pt extends Ht{constructor(t){super(),this.contentType=t,this.arrayBuffersMaxlength=8,Gt(this)}writeUint8Array(t){super.writeUint8Array(t),this.arrayBuffers.length==this.arrayBuffersMaxlength&&Ot(this),this.arrayBuffers.push(t.buffer)}getData(){return this.blob||(this.arrayBuffers.length&&Ot(this),this.blob=this.pendingBlob,Gt(this)),this.blob}}function Gt(t){t.pendingBlob=new u([],{type:t.contentType}),t.arrayBuffers=[]}function Ot(t){t.pendingBlob=new u([t.pendingBlob,...t.arrayBuffers],{type:t.contentType}),t.arrayBuffers=[]}class qt{constructor(t){this.readableStream=t,this.reader=t.getReader(),this.size=1/0,this.index=0,this.currentSize=0,this.pendingValue=new l}init(){this.initialized=!0}async readUint8Array(t,e){if(this.index!=t)throw new c("Reader is not seekable");let n,r=new l(e),s=0;do{const t=await this.reader.read();let{value:a}=t;if(n=t.done,a?this.currentSize+=a.length:(a=this.pendingValue,this.pendingValue=new l),this.pendingValue.length){const t=new l(this.pendingValue.length+a.length);t.set(this.pendingValue),t.set(a,this.pendingValue.length),this.pendingValue=new l,a=t}s+a.length>e?(r.set(a.subarray(0,e),s),this.pendingValue=a.subarray(e),s+=e):(r.set(a,s),s+=a.length)}while(s<e&&!n);return n&&this.size==1/0&&(this.size=this.currentSize),this.size<e&&(r=r.slice(0,this.size),e=this.size),this.index+=e,r}}class Nt extends Ht{constructor(t){super(),this.writableStream=t,this.writer=t.getWriter()}async writeUint8Array(t){return await this.writer.ready,this.writer.write(t)}async getData(){return await this.writer.ready,await this.writer.close(),this.writableStream}}class Zt extends Wt{constructor(t,n){super(),this.url=t,this.preventHeadRequest=n.preventHeadRequest,this.useRangeHeader=n.useRangeHeader,this.forceRangeRequests=n.forceRangeRequests,this.options=e.assign({},n),delete this.options.preventHeadRequest,delete this.options.useRangeHeader,delete this.options.forceRangeRequests,delete this.options.useXHR}async init(){super.init(),await Yt(this,re,$t)}readUint8Array(t,e){return Xt(this,t,e,re,$t)}}class jt extends Wt{constructor(t,e){super(),this.url=t,this.preventHeadRequest=e.preventHeadRequest,this.useRangeHeader=e.useRangeHeader,this.forceRangeRequests=e.forceRangeRequests,this.options=e}async init(){super.init(),await Yt(this,se,te)}readUint8Array(t,e){return Xt(this,t,e,se,te)}}async function Yt(t,e,n){if(function(t){if(void 0!==y){const e=y.createElement("a");return e.href=t,"http:"==e.protocol||"https:"==e.protocol}return/^https?:\/\//i.test(t)}(t.url)&&(t.useRangeHeader||t.forceRangeRequests)){const r=await e("GET",t,Jt(t));if(!t.forceRangeRequests&&"bytes"!=r.headers.get("Accept-Ranges"))throw new c("HTTP Range not supported");{let s;const a=r.headers.get("Content-Range");if(a){const t=a.trim().split(/\s*\/\s*/);if(t.length){const e=t[1];e&&"*"!=e&&(s=Number(e))}}void 0===s?await ne(t,e,n):t.size=s}}else await ne(t,e,n)}async function Xt(t,e,n,r,s){if(t.useRangeHeader||t.forceRangeRequests){const s=await r("GET",t,Jt(t,e,n));if(206!=s.status)throw new c("HTTP Range not supported");return new l(await s.arrayBuffer())}return t.data||await s(t,t.options),new l(t.data.subarray(e,e+n))}function Jt(t,n=0,r=1){return e.assign({},Qt(t),{Range:"bytes="+n+"-"+(n+r-1)})}function Qt(t){const n=t.options.headers;if(n)return Symbol.iterator in n?e.fromEntries(n):n}async function $t(t){await ee(t,re)}async function te(t){await ee(t,se)}async function ee(t,e){const n=await e("GET",t,Qt(t));t.data=new l(await n.arrayBuffer()),t.size||(t.size=t.data.length)}async function ne(t,e,n){if(t.preventHeadRequest)await n(t,t.options);else{const r=(await e("HEAD",t,Qt(t))).headers.get("Content-Length");r?t.size=Number(r):await n(t,t.options)}}async function re(t,{options:n,url:r},s){const a=await fetch(r,e.assign({},n,{method:t,headers:s}));if(a.status<400)return a;throw new c("HTTP error "+(a.statusText||a.status))}function se(t,{url:n},r){return new p(((s,a)=>{const o=new XMLHttpRequest;if(o.addEventListener("load",(()=>{if(o.status<400){const t=[];o.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((e=>{const n=e.trim().split(/\s*:\s*/);n[0]=n[0].trim().replace(/^[a-z]|-[a-z]/g,(t=>t.toUpperCase())),t.push(n)})),s({status:o.status,arrayBuffer:()=>o.response,headers:new i(t)})}else a(new c("HTTP error "+(o.statusText||o.status)))}),!1),o.addEventListener("error",(t=>a(t.detail.error)),!1),o.open(t,n),r)for(const t of e.entries(r))o.setRequestHeader(t[0],t[1]);o.responseType="arraybuffer",o.send()}))}class ae extends Wt{constructor(t,e={}){super(),this.url=t,e.useXHR?this.reader=new jt(t,e):this.reader=new Zt(t,e)}set size(t){}get size(){return this.reader.size}async init(){super.init(),await this.reader.init()}readUint8Array(t,e){return this.reader.readUint8Array(t,e)}}class ie extends ae{constructor(t,e={}){e.useRangeHeader=!0,super(t,e)}}class oe extends Wt{constructor(t){super(),this.array=t,this.size=t.length}readUint8Array(t,e){return this.array.slice(t,t+e)}}class ce extends Ht{constructor(){super(),this.array=new l(0)}writeUint8Array(t){super.writeUint8Array(t);const e=this.array;this.array=new l(e.length+t.length),this.array.set(e),this.array.set(t,e.length)}getData(){return this.array}}const le=new a(2107,11,31),he=new a(1980,0,1),de="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ".split("");function fe(t,e){if(e&&"cp437"==e.trim().toLowerCase())return(t=>{let e="";for(let n=0;n<t.length;n++)e+=de[t[n]];return e})(t);if(void 0===w){const e=new FileReader;return new p(((n,r)=>{e.onload=t=>n(t.target.result),e.onerror=()=>r(e.error),e.readAsText(new u([t]))}))}return new w(e).decode(t)}const ue=["filename","rawFilename","directory","encrypted","compressedSize","uncompressedSize","lastModDate","rawLastModDate","comment","rawComment","signature","extraField","rawExtraField","bitFlag","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","filenameUTF8","commentUTF8","offset","zip64","compressionMethod","extraFieldNTFS","lastAccessDate","creationDate","extraFieldExtendedTimestamp","version","versionMadeBy","msDosCompatible","internalFileAttribute","externalFileAttribute"];class pe{constructor(t){ue.forEach((e=>this[e]=t[e]))}}const ge="File format is not recognized",we="End of central directory not found",ye="End of Zip64 central directory not found",me="End of Zip64 central directory locator not found",be="Central directory header not found",ve="Local file header not found",ke="Zip64 extra field not found",ze="File contains encrypted entry",_e="Encryption method not supported",Se="Compression method not supported",xe=["uncompressedSize","compressedSize","offset"];class De{constructor(t,n={}){e.assign(this,{reader:t,options:n,config:F()})}async*getEntriesGenerator(t={}){const n=this,r=n.reader;if(r.initialized||await r.init(),r.size<22)throw new c(ge);const a=await async function(t,e,n,r,a){const i=new l(4);!function(t,e,n){t.setUint32(e,n,!0)}(Me(i),0,e);const o=r+a;return await c(r)||await c(s.min(o,n));async function c(e){const s=n-e,a=await Le(t,s,e);for(let t=a.length-r;t>=0;t--)if(a[t]==i[0]&&a[t+1]==i[1]&&a[t+2]==i[2]&&a[t+3]==i[3])return{offset:s+t,buffer:a.slice(t,t+r).buffer}}}(r,101010256,r.size,22,1048560);if(!a)throw new c("End of central directory not found");const i=Me(a);let o=He(i,12),h=He(i,16),d=We(i,8),f=0;if(4294967295==h||4294967295==o||65535==d){const t=Me(await Le(r,a.offset-20,20));if(117853008!=He(t,0))throw new c("End of Zip64 central directory not found");h=Ie(t,8);let e=await Le(r,h,56),n=Me(e);const s=a.offset-20-56;if(101075792!=He(n,0)&&h!=s){const t=h;h=s,f=h-t,e=await Le(r,h,56),n=Me(e)}if(101075792!=He(n,0))throw new c("End of Zip64 central directory locator not found");d=Ie(n,32),o=Ie(n,40),h-=o}if(h<0||h>=r.size)throw new c(ge);let u=0,g=await Le(r,h,o),w=Me(g);if(o){const t=a.offset-o;if(33639248!=He(w,u)&&h!=t){const e=h;h=t,f=h-e,g=await Le(r,h,o),w=Me(g)}}if(h<0||h>=r.size)throw new c(ge);for(let s=0;s<d;s++){const a=new Ae(r,n.config,n.options);if(33639248!=He(w,u))throw new c("Central directory header not found");Fe(a,w,u+6);const i=Boolean(a.bitFlag.languageEncodingFlag),o=u+46,l=o+a.filenameLength,h=l+a.extraFieldLength,y=We(w,u+4),m=0==(0&y);e.assign(a,{versionMadeBy:y,msDosCompatible:m,compressedSize:0,uncompressedSize:0,commentLength:We(w,u+32),directory:m&&16==(16&Ue(w,u+38)),offset:He(w,u+42)+f,internalFileAttribute:He(w,u+34),externalFileAttribute:He(w,u+38),rawFilename:g.subarray(o,l),filenameUTF8:i,commentUTF8:i,rawExtraField:g.subarray(l,h)});const b=h+a.commentLength;a.rawComment=g.subarray(h,b);const v=Ee(n,t,"filenameEncoding"),k=Ee(n,t,"commentEncoding"),[z,_]=await p.all([fe(a.rawFilename,a.filenameUTF8?"utf-8":v||"cp437"),fe(a.rawComment,a.commentUTF8?"utf-8":k||"cp437")]);a.filename=z,a.comment=_,!a.directory&&a.filename.endsWith("/")&&(a.directory=!0),await Te(a,a,w,u+6);const S=new pe(a);if(S.getData=(t,e)=>a.getData(t,S,e),u=b,t.onprogress)try{t.onprogress(s+1,d,new pe(a))}catch(t){}yield S}return!0}async getEntries(t={}){const e=[],n=this.getEntriesGenerator(t);let r=n.next();for(;!(await r).done;)e.push((await r).value),r=n.next();return e}async close(){}}class Ae{constructor(t,n,r){e.assign(this,{reader:t,config:n,options:r})}async getData(t,e,n={}){const r=this,{reader:s,offset:a,extraFieldAES:i,compressionMethod:o,config:l,bitFlag:h,signature:d,rawLastModDate:f,compressedSize:u}=r,p=r.localDirectory={};s.initialized||await s.init();let g=await Le(s,a,30);const w=Me(g);let y=Ee(r,n,"password");if(y=y&&y.length&&y,i&&99!=i.originalCompressionMethod)throw new c("Compression method not supported");if(0!=o&&8!=o)throw new c("Compression method not supported");if(67324752!=He(w,0))throw new c("Local file header not found");Fe(p,w,4),g=await Le(s,a,30+p.filenameLength+p.extraFieldLength),p.rawExtraField=g.subarray(30+p.filenameLength),await Te(r,p,w,4),e.lastAccessDate=p.lastAccessDate,e.creationDate=p.creationDate;const m=r.encrypted&&p.encrypted,b=m&&!i;if(m){if(!b&&void 0===i.strength)throw new c("Encryption method not supported");if(!y)throw new c("File contains encrypted entry")}const v=await xt(l.Inflate,{codecType:"inflate",password:y,zipCrypto:b,encryptionStrength:i&&i.strength,signed:Ee(r,n,"checkSignature"),passwordVerification:b&&(h.dataDescriptor?f>>>8&255:d>>>24&255),signature:d,compressed:0!=o,encrypted:m,useWebWorkers:Ee(r,n,"useWebWorkers")},l);t.initialized||await t.init();const k=Ee(r,n,"signal"),z=a+30+p.filenameLength+p.extraFieldLength;return await Tt(v,s,t,z,(()=>u),l,{onprogress:n.onprogress,signal:k}),t.getData()}}function Fe(t,n,r){const s=t.rawBitFlag=We(n,r+2),a=1==(1&s),i=He(n,r+6);e.assign(t,{encrypted:a,version:We(n,r),bitFlag:{level:(6&s)>>1,dataDescriptor:8==(8&s),languageEncodingFlag:2048==(2048&s)},rawLastModDate:i,lastModDate:Ce(i),filenameLength:We(n,r+22),extraFieldLength:We(n,r+24)})}async function Te(t,n,r,o){const h=n.rawExtraField,d=n.extraField=new i,f=Me(new l(h));let u=0;try{for(;u<h.length;){const t=We(f,u),e=We(f,u+2);d.set(t,{type:t,data:h.slice(u+4,u+4+e)}),u+=4+e}}catch(t){}const p=We(r,o+4);n.signature=He(r,o+10),n.uncompressedSize=He(r,o+18),n.compressedSize=He(r,o+14);const g=d.get(1);g&&(!function(t,e){e.zip64=!0;const n=Me(t.data);t.values=[];for(let e=0;e<s.floor(t.data.length/8);e++)t.values.push(Ie(n,0+8*e));const r=xe.filter((t=>4294967295==e[t]));for(let e=0;e<r.length;e++)t[r[e]]=t.values[e];xe.forEach((n=>{if(4294967295==e[n]){if(void 0===t[n])throw new c("Zip64 extra field not found");e[n]=t[n]}}))}(g,n),n.extraFieldZip64=g);const w=d.get(28789);w&&(await Re(w,"filename","rawFilename",n,t),n.extraFieldUnicodePath=w);const y=d.get(25461);y&&(await Re(y,"comment","rawComment",n,t),n.extraFieldUnicodeComment=y);const m=d.get(39169);m?(!function(t,e,n){const r=Me(t.data);t.vendorVersion=Ue(r,0),t.vendorId=Ue(r,2);const s=Ue(r,4);t.strength=s,t.originalCompressionMethod=n,e.compressionMethod=t.compressionMethod=We(r,5)}(m,n,p),n.extraFieldAES=m):n.compressionMethod=p;const b=d.get(10);b&&(!function(t,n){const r=Me(t.data);let s,a=4;try{for(;a<t.data.length&&!s;){const e=We(r,a),n=We(r,a+2);1==e&&(s=t.data.slice(a+4,a+4+n)),a+=4+n}}catch(t){}try{if(s&&24==s.length){const r=Me(s),a=r.getBigUint64(0,!0),i=r.getBigUint64(8,!0),o=r.getBigUint64(16,!0);e.assign(t,{rawLastModDate:a,rawLastAccessDate:i,rawCreationDate:o});const c=Be(a),l=Be(i),h={lastModDate:c,lastAccessDate:l,creationDate:Be(o)};e.assign(t,h),e.assign(n,h)}}catch(t){}}(b,n),n.extraFieldNTFS=b);const v=d.get(21589);v&&(!function(t,e){const n=Me(t.data),r=Ue(n,0),s=[],i=[];1==(1&r)&&(s.push("lastModDate"),i.push("rawLastModDate"));2==(2&r)&&(s.push("lastAccessDate"),i.push("rawLastAccessDate"));4==(4&r)&&(s.push("creationDate"),i.push("rawCreationDate"));let o=1;s.forEach(((r,s)=>{if(t.data.length>=o+4){const c=He(n,o);e[r]=t[r]=new a(1e3*c);const l=i[s];t[l]=c}o+=4}))}(v,n),n.extraFieldExtendedTimestamp=v)}async function Re(t,e,n,r,s){const a=Me(t.data);t.version=Ue(a,0),t.signature=He(a,1);const i=new U;i.append(s[n]);const o=Me(new l(4));o.setUint32(0,i.get(),!0),t[e]=await fe(t.data.subarray(5)),t.valid=!s.bitFlag.languageEncodingFlag&&t.signature==He(o,0),t.valid&&(r[e]=t[e],r[e+"UTF8"]=!0)}function Ee(t,e,n){return void 0===e[n]?t.options[n]:e[n]}function Ce(t){const e=(4294901760&t)>>16,n=65535&t;try{return new a(1980+((65024&e)>>9),((480&e)>>5)-1,31&e,(63488&n)>>11,(2016&n)>>5,2*(31&n),0)}catch(t){}}function Be(t){return new a(Number(t/r(1e4)-r(116444736e5)))}function Ue(t,e){return t.getUint8(e)}function We(t,e){return t.getUint16(e,!0)}function He(t,e){return t.getUint32(e,!0)}function Ie(t,e){return Number(t.getBigUint64(e,!0))}function Me(t){return new f(t.buffer)}function Le(t,e,n){return t.readUint8Array(e,n)}const Ve="File already exists",Ke="Zip file comment exceeds 64KB",Pe="File entry comment exceeds 64KB",Ge="File entry name exceeds 64KB",Oe="Version exceeds 65535",qe="The strength must equal 1, 2, or 3",Ne="Extra field type exceeds 65535",Ze="Extra field data exceeds 64KB",je="Zip64 is not supported",Ye=new l([7,0,2,0,65,69,3,0,0]);let Xe,Je=0;class Qe{constructor(t,n={}){e.assign(this,{writer:t,options:n,config:F(),files:new i,offset:t.size,pendingCompressedSize:0,pendingEntries:[],pendingAddFileCalls:new Set})}async add(n="",i,o={}){const u=this;if(!(Je<u.config.maxWorkers))return new p(((t,e)=>u.pendingEntries.push({name:n,reader:i,options:o,resolve:t,reject:e})));{let g;Je++;try{return g=async function(n,i,o,u){i=i.trim(),u.directory&&!i.endsWith("/")?i+="/":u.directory=i.endsWith("/");if(n.files.has(i))throw new c("File already exists");const g=W(i);if(g.length>65535)throw new c("File entry name exceeds 64KB");const w=u.comment||"",y=W(w);if(y.length>65535)throw new c("File entry comment exceeds 64KB");const m=n.options.version||u.version||0;if(m>65535)throw new c("Version exceeds 65535");const b=n.options.versionMadeBy||u.versionMadeBy||20;if(b>65535)throw new c("Version exceeds 65535");const v=en(n,u,"lastModDate")||new a,k=en(n,u,"lastAccessDate"),z=en(n,u,"creationDate"),_=en(n,u,"password"),S=en(n,u,"encryptionStrength")||3,x=en(n,u,"zipCrypto");if(void 0!==_&&void 0!==S&&(S<1||S>3))throw new c("The strength must equal 1, 2, or 3");let D=new l(0);const A=u.extraField;if(A){let t=0,e=0;A.forEach((e=>t+=4+e.length)),D=new l(t),A.forEach(((t,n)=>{if(n>65535)throw new c("Extra field type exceeds 65535");if(t.length>65535)throw new c("Extra field data exceeds 64KB");on(D,new h([n]),e),on(D,new h([t.length]),e+2),on(D,t,e+4),e+=4+t.length}))}let F=en(n,u,"extendedTimestamp");void 0===F&&(F=!0);let T=0,R=en(n,u,"keepOrder");void 0===R&&(R=!0);let E=0,C=en(n,u,"msDosCompatible");void 0===C&&(C=!0);const B=en(n,u,"internalFileAttribute")||0,U=en(n,u,"externalFileAttribute")||0;o&&(o.initialized||await o.init(),E=o.size,T=function(t){return t+5*(s.floor(t/16383)+1)}(E));let H=u.zip64||n.options.zip64||!1;if(n.offset+n.pendingCompressedSize>=4294967295||E>=4294967295||T>=4294967295){if(!1===u.zip64||!1===n.options.zip64||!R)throw new c("Zip64 is not supported");H=!0}n.pendingCompressedSize+=T,await p.resolve();const I=en(n,u,"level"),M=en(n,u,"useWebWorkers"),L=en(n,u,"bufferedWrite");let V=en(n,u,"dataDescriptor"),K=en(n,u,"dataDescriptorSignature");const P=en(n,u,"signal");void 0===V&&(V=!0);V&&void 0===K&&(K=!1);const G=await async function(n,a,i,o){const h=n.files,u=n.writer,g=t.from(h.values()).pop();let w,y,m,b={};h.set(a,b);try{let v,k,z;if(o.keepOrder&&(v=g&&g.lock),b.lock=z=new p((t=>m=t)),o.bufferedWrite||n.lockWrite||!o.dataDescriptor?(k=new Pt,k.init(),w=!0):(n.lockWrite=new p((t=>y=t)),u.initialized||await u.init(),k=u),b=await async function(t,n,a,i){const{rawFilename:o,lastAccessDate:c,creationDate:h,password:f,level:u,zip64:p,zipCrypto:g,dataDescriptor:w,dataDescriptorSignature:y,directory:m,version:b,versionMadeBy:v,rawComment:k,rawExtraField:z,useWebWorkers:_,onprogress:S,signal:x,encryptionStrength:D,extendedTimestamp:A,msDosCompatible:F,internalFileAttribute:T,externalFileAttribute:R}=i,E=Boolean(f&&f.length),C=0!==u&&!m;let B,U,W;if(E&&!g){B=new l(Ye.length+2);const t=cn(B);rn(t,0,39169),on(B,Ye,2),nn(t,8,D)}else B=new l(0);if(A){W=new l(9+(c?4:0)+(h?4:0));const t=cn(W);rn(t,0,21589),rn(t,2,W.length-4);nn(t,4,1+(c?2:0)+(h?4:0)),sn(t,5,s.floor(i.lastModDate.getTime()/1e3)),c&&sn(t,9,s.floor(c.getTime()/1e3)),h&&sn(t,13,s.floor(h.getTime()/1e3));try{U=new l(36);const t=cn(U),e=tn(i.lastModDate);rn(t,0,10),rn(t,2,32),rn(t,8,1),rn(t,10,24),an(t,12,e),an(t,20,tn(c)||e),an(t,28,tn(h)||e)}catch(t){U=new l(0)}}else U=W=new l(0);const H={version:b||20,versionMadeBy:v,zip64:p,directory:Boolean(m),filenameUTF8:!0,rawFilename:o,commentUTF8:!0,rawComment:k,rawExtraFieldZip64:new l(p?28:0),rawExtraFieldExtendedTimestamp:W,rawExtraFieldNTFS:U,rawExtraFieldAES:B,rawExtraField:z,extendedTimestamp:A,msDosCompatible:F,internalFileAttribute:T,externalFileAttribute:R};let I=H.uncompressedSize=0,M=2048;w&&(M|=8);let L=0;C&&(L=8);p&&(H.version=H.version>45?H.version:45);E&&(M|=1,g||(H.version=H.version>51?H.version:51,L=99,C&&(H.rawExtraFieldAES[9]=8)));H.compressionMethod=L;const V=H.headerArray=new l(26),K=cn(V);rn(K,0,H.version),rn(K,2,M),rn(K,4,L);const P=new d(1),G=cn(P);let O;O=i.lastModDate<he?he:i.lastModDate>le?le:i.lastModDate;rn(G,0,(O.getHours()<<6|O.getMinutes())<<5|O.getSeconds()/2),rn(G,2,(O.getFullYear()-1980<<4|O.getMonth()+1)<<5|O.getDate());const q=P[0];sn(K,6,q),rn(K,22,o.length);const N=B.length+W.length+U.length+H.rawExtraField.length;rn(K,24,N);const Z=new l(30+o.length+N);let j;sn(cn(Z),0,67324752),on(Z,V,4),on(Z,o,30),on(Z,B,30+o.length),on(Z,W,30+o.length+B.length),on(Z,U,30+o.length+B.length+W.length),on(Z,H.rawExtraField,30+o.length+B.length+W.length+U.length);let Y=0;if(t){const e=await xt(a.Deflate,{codecType:"deflate",level:u,password:f,encryptionStrength:D,zipCrypto:E&&g,passwordVerification:E&&g&&q>>8&255,signed:!0,compressed:C,encrypted:E,useWebWorkers:_},a);await n.writeUint8Array(Z),H.dataWritten=!0,j=await Tt(e,t,n,0,(()=>t.size),a,{onprogress:S,signal:x}),I=H.uncompressedSize=t.size,Y=j.length}else await n.writeUint8Array(Z),H.dataWritten=!0;let X,J=new l(0),Q=0;w&&(J=new l(p?y?24:20:y?16:12),X=cn(J),y&&(Q=4,sn(X,0,134695760)));if(t){const t=j.signature;if(E&&!g||void 0===t||(sn(K,10,t),H.signature=t,w&&sn(X,Q,t)),p){const t=cn(H.rawExtraFieldZip64);rn(t,0,1),rn(t,2,24),sn(K,14,4294967295),an(t,12,r(Y)),sn(K,18,4294967295),an(t,4,r(I)),w&&(an(X,Q+4,r(Y)),an(X,Q+12,r(I)))}else sn(K,14,Y),sn(K,18,I),w&&(sn(X,Q+4,Y),sn(X,Q+8,I))}w&&await n.writeUint8Array(J);const $=Z.length+Y+J.length;return e.assign(H,{compressedSize:Y,lastModDate:O,rawLastModDate:q,creationDate:h,lastAccessDate:c,encrypted:E,length:$}),H}(i,k,n.config,o),b.lock=z,h.set(a,b),b.filename=a,w){let e=0;const r=k.getData();let s;await p.all([n.lockWrite,v]);do{s=t.from(h.values()).find((t=>t.writingBufferedData)),s&&await s.lock}while(s&&s.lock);if(b.writingBufferedData=!0,!o.dataDescriptor){const t=26,n=await $e(r,0,t),s=new f(n);b.encrypted&&!o.zipCrypto||sn(s,14,b.signature),b.zip64?(sn(s,18,4294967295),sn(s,22,4294967295)):(sn(s,18,b.compressedSize),sn(s,22,b.uncompressedSize)),await u.writeUint8Array(new l(n)),e=t}await async function(t,e,n=0){const r=536870912;async function s(){if(n<e.size){const a=await $e(e,n,n+r);await t.writeUint8Array(new l(a)),n+=r,await s()}}await s()}(u,r,e),delete b.writingBufferedData}if(b.offset=n.offset,b.zip64){an(cn(b.rawExtraFieldZip64),20,r(b.offset))}else if(b.offset>=4294967295)throw new c("Zip64 is not supported");return n.offset+=b.length,b}catch(t){throw(w&&b.writingBufferedData||!w&&b.dataWritten)&&(t.corruptedEntry=n.hasCorruptedEntries=!0,b.uncompressedSize&&(n.offset+=b.uncompressedSize)),h.delete(a),t}finally{m(),y&&y()}}(n,i,o,e.assign({},u,{rawFilename:g,rawComment:y,version:m,versionMadeBy:b,lastModDate:v,lastAccessDate:k,creationDate:z,rawExtraField:D,zip64:H,password:_,level:I,useWebWorkers:M,encryptionStrength:S,extendedTimestamp:F,zipCrypto:x,bufferedWrite:L,keepOrder:R,dataDescriptor:V,dataDescriptorSignature:K,signal:P,msDosCompatible:C,internalFileAttribute:B,externalFileAttribute:U}));T&&(n.pendingCompressedSize-=T);return e.assign(G,{name:i,comment:w,extraField:A}),new pe(G)}(u,n,i,o),this.pendingAddFileCalls.add(g),await g}finally{this.pendingAddFileCalls.delete(g),Je--;const t=u.pendingEntries.shift();t&&u.add(t.name,t.reader,t.options).then(t.resolve).catch(t.reject)}}}async close(e=new l(0),n={}){for(;this.pendingAddFileCalls.size;)await p.all(t.from(this.pendingAddFileCalls));return await async function(e,n,a){const i=e.writer,o=e.files;let h=0,d=0,f=e.offset,u=o.size;for(const[,t]of o)d+=46+t.rawFilename.length+t.rawComment.length+t.rawExtraFieldZip64.length+t.rawExtraFieldAES.length+t.rawExtraFieldExtendedTimestamp.length+t.rawExtraFieldNTFS.length+t.rawExtraField.length;let p=a.zip64||e.options.zip64||!1;if(f>=4294967295||d>=4294967295||u>=65535){if(!1===a.zip64||!1===e.options.zip64)throw new c("Zip64 is not supported");p=!0}const g=new l(d+(p?98:22)),w=cn(g);for(const[e,n]of t.from(o.values()).entries()){const{rawFilename:t,rawExtraFieldZip64:r,rawExtraFieldAES:i,rawExtraField:c,rawComment:d,versionMadeBy:f,headerArray:u,directory:p,zip64:y,msDosCompatible:m,internalFileAttribute:b,externalFileAttribute:v}=n;let k,z;if(n.extendedTimestamp){z=n.rawExtraFieldNTFS,k=new l(9);const t=cn(k);rn(t,0,21589),rn(t,2,k.length-4),nn(t,4,1),sn(t,5,s.floor(n.lastModDate.getTime()/1e3))}else z=k=new l(0);const _=r.length+i.length+k.length+z.length+c.length;if(sn(w,h,33639248),rn(w,h+4,f),on(g,u,h+6),rn(w,h+30,_),rn(w,h+32,d.length),sn(w,h+34,b),v?sn(w,h+38,v):p&&m&&nn(w,h+38,16),sn(w,h+42,y?4294967295:n.offset),on(g,t,h+46),on(g,r,h+46+t.length),on(g,i,h+46+t.length+r.length),on(g,k,h+46+t.length+r.length+i.length),on(g,z,h+46+t.length+r.length+i.length+k.length),on(g,c,h+46+t.length+r.length+i.length+k.length+z.length),on(g,d,h+46+t.length+_),h+=46+t.length+_+d.length,a.onprogress)try{a.onprogress(e+1,o.size,new pe(n))}catch(t){}}p&&(sn(w,h,101075792),an(w,h+4,r(44)),rn(w,h+12,45),rn(w,h+14,45),an(w,h+24,r(u)),an(w,h+32,r(u)),an(w,h+40,r(d)),an(w,h+48,r(f)),sn(w,h+56,117853008),an(w,h+64,r(f)+r(d)),sn(w,h+72,1),u=65535,f=4294967295,d=4294967295,h+=76);if(sn(w,h,101010256),rn(w,h+8,u),rn(w,h+10,u),sn(w,h+12,d),sn(w,h+16,f),n&&n.length){if(!(n.length<=65535))throw new c("Zip file comment exceeds 64KB");rn(w,h+20,n.length)}await i.writeUint8Array(g),n&&n.length&&await i.writeUint8Array(n)}(this,e,n),this.writer.getData()}}function $e(t,e,n){if(t.arrayBuffer)return e||n?t.slice(e,n).arrayBuffer():t.arrayBuffer();{const r=new FileReader;return new p(((s,a)=>{r.onload=t=>s(t.target.result),r.onerror=()=>a(r.error),r.readAsArrayBuffer(e||n?t.slice(e,n):t)}))}}function tn(t){if(t)return(r(t.getTime())+r(116444736e5))*r(1e4)}function en(t,e,n){return void 0===e[n]?t.options[n]:e[n]}function nn(t,e,n){t.setUint8(e,n)}function rn(t,e,n){t.setUint16(e,n,!0)}function sn(t,e,n){t.setUint32(e,n,!0)}function an(t,e,n){t.setBigUint64(e,n,!0)}function on(t,e,n){t.set(e,n)}function cn(t){return new f(t.buffer)}try{Xe=import.meta.url}catch(t){}T({baseURL:Xe}),(t=>{if("function"==typeof o.createObjectURL){const e=()=>o.createObjectURL(new u(['const{Array:t,Object:e,Math:n,Error:r,Uint8Array:s,Uint16Array:a,Uint32Array:i,Int32Array:o,DataView:c,Promise:l,TextEncoder:h,crypto:f,postMessage:p,TransformStream:u,ReadableStream:d,WritableStream:g,CompressionStream:w,DecompressionStream:y}=globalThis,v=[];for(let t=0;256>t;t++){let e=t;for(let t=0;8>t;t++)1&e?e=e>>>1^3988292384:e>>>=1;v[t]=e}class m{constructor(t){this.crc=t||-1}append(t){let e=0|this.crc;for(let n=0,r=0|t.length;r>n;n++)e=e>>>8^v[255&(e^t[n])];this.crc=e}get(){return~this.crc}}const b={concat(t,e){if(0===t.length||0===e.length)return t.concat(e);const n=t[t.length-1],r=b.getPartial(n);return 32===r?t.concat(e):b._shiftRight(e,r,0|n,t.slice(0,t.length-1))},bitLength(t){const e=t.length;if(0===e)return 0;const n=t[e-1];return 32*(e-1)+b.getPartial(n)},clamp(t,e){if(32*t.length<e)return t;const r=(t=t.slice(0,n.ceil(e/32))).length;return e&=31,r>0&&e&&(t[r-1]=b.partial(e,t[r-1]&2147483648>>e-1,1)),t},partial:(t,e,n)=>32===t?e:(n?0|e:e<<32-t)+1099511627776*t,getPartial:t=>n.round(t/1099511627776)||32,_shiftRight(t,e,n,r){for(void 0===r&&(r=[]);e>=32;e-=32)r.push(n),n=0;if(0===e)return r.concat(t);for(let s=0;s<t.length;s++)r.push(n|t[s]>>>e),n=t[s]<<32-e;const s=t.length?t[t.length-1]:0,a=b.getPartial(s);return r.push(b.partial(e+a&31,e+a>32?n:r.pop(),1)),r}},_={bytes:{fromBits(t){const e=b.bitLength(t)/8,n=new s(e);let r;for(let s=0;e>s;s++)0==(3&s)&&(r=t[s/4]),n[s]=r>>>24,r<<=8;return n},toBits(t){const e=[];let n,r=0;for(n=0;n<t.length;n++)r=r<<8|t[n],3==(3&n)&&(e.push(r),r=0);return 3&n&&e.push(b.partial(8*(3&n),r)),e}}},k={sha1:function(t){t?(this._h=t._h.slice(0),this._buffer=t._buffer.slice(0),this._length=t._length):this.reset()}};k.sha1.prototype={blockSize:512,reset:function(){const t=this;return t._h=this._init.slice(0),t._buffer=[],t._length=0,t},update:function(t){const e=this;"string"==typeof t&&(t=_.utf8String.toBits(t));const n=e._buffer=b.concat(e._buffer,t),s=e._length,a=e._length=s+b.bitLength(t);if(a>9007199254740991)throw new r("Cannot hash more than 2^53 - 1 bits");const o=new i(n);let c=0;for(let t=e.blockSize+s-(e.blockSize+s&e.blockSize-1);a>=t;t+=e.blockSize)e._block(o.subarray(16*c,16*(c+1))),c+=1;return n.splice(0,16*c),e},finalize:function(){const t=this;let e=t._buffer;const r=t._h;e=b.concat(e,[b.partial(1,1)]);for(let t=e.length+2;15&t;t++)e.push(0);for(e.push(n.floor(t._length/4294967296)),e.push(0|t._length);e.length;)t._block(e.splice(0,16));return t.reset(),r},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:(t,e,n,r)=>t>19?t>39?t>59?t>79?void 0:e^n^r:e&n|e&r|n&r:e^n^r:e&n|~e&r,_S:(t,e)=>e<<t|e>>>32-t,_block:function(e){const r=this,s=r._h,a=t(80);for(let t=0;16>t;t++)a[t]=e[t];let i=s[0],o=s[1],c=s[2],l=s[3],h=s[4];for(let t=0;79>=t;t++){16>t||(a[t]=r._S(1,a[t-3]^a[t-8]^a[t-14]^a[t-16]));const e=r._S(5,i)+r._f(t,o,c,l)+h+a[t]+r._key[n.floor(t/20)]|0;h=l,l=c,c=r._S(30,o),o=i,i=e}s[0]=s[0]+i|0,s[1]=s[1]+o|0,s[2]=s[2]+c|0,s[3]=s[3]+l|0,s[4]=s[4]+h|0}};const S=class{constructor(t){const e=this;e._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],e._tables[0][0][0]||e._precompute();const n=e._tables[0][4],s=e._tables[1],a=t.length;let i,o,c,l=1;if(4!==a&&6!==a&&8!==a)throw new r("invalid aes key size");for(e._key=[o=t.slice(0),c=[]],i=a;4*a+28>i;i++){let t=o[i-1];(i%a==0||8===a&&i%a==4)&&(t=n[t>>>24]<<24^n[t>>16&255]<<16^n[t>>8&255]<<8^n[255&t],i%a==0&&(t=t<<8^t>>>24^l<<24,l=l<<1^283*(l>>7))),o[i]=o[i-a]^t}for(let t=0;i;t++,i--){const e=o[3&t?i:i-4];c[t]=4>=i||4>t?e:s[0][n[e>>>24]]^s[1][n[e>>16&255]]^s[2][n[e>>8&255]]^s[3][n[255&e]]}}encrypt(t){return this._crypt(t,0)}decrypt(t){return this._crypt(t,1)}_precompute(){const t=this._tables[0],e=this._tables[1],n=t[4],r=e[4],s=[],a=[];let i,o,c,l;for(let t=0;256>t;t++)a[(s[t]=t<<1^283*(t>>7))^t]=t;for(let h=i=0;!n[h];h^=o||1,i=a[i]||1){let a=i^i<<1^i<<2^i<<3^i<<4;a=a>>8^255&a^99,n[h]=a,r[a]=h,l=s[c=s[o=s[h]]];let f=16843009*l^65537*c^257*o^16843008*h,p=257*s[a]^16843008*a;for(let n=0;4>n;n++)t[n][h]=p=p<<24^p>>>8,e[n][a]=f=f<<24^f>>>8}for(let n=0;5>n;n++)t[n]=t[n].slice(0),e[n]=e[n].slice(0)}_crypt(t,e){if(4!==t.length)throw new r("invalid aes block size");const n=this._key[e],s=n.length/4-2,a=[0,0,0,0],i=this._tables[e],o=i[0],c=i[1],l=i[2],h=i[3],f=i[4];let p,u,d,g=t[0]^n[0],w=t[e?3:1]^n[1],y=t[2]^n[2],v=t[e?1:3]^n[3],m=4;for(let t=0;s>t;t++)p=o[g>>>24]^c[w>>16&255]^l[y>>8&255]^h[255&v]^n[m],u=o[w>>>24]^c[y>>16&255]^l[v>>8&255]^h[255&g]^n[m+1],d=o[y>>>24]^c[v>>16&255]^l[g>>8&255]^h[255&w]^n[m+2],v=o[v>>>24]^c[g>>16&255]^l[w>>8&255]^h[255&y]^n[m+3],m+=4,g=p,w=u,y=d;for(let t=0;4>t;t++)a[e?3&-t:t]=f[g>>>24]<<24^f[w>>16&255]<<16^f[y>>8&255]<<8^f[255&v]^n[m++],p=g,g=w,w=y,y=v,v=p;return a}},z={getRandomValues(t){const e=new i(t.buffer),r=t=>{let e=987654321;const r=4294967295;return()=>(e=36969*(65535&e)+(e>>16)&r,(((e<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r)/4294967296+.5)*(n.random()>.5?1:-1))};for(let s,a=0;a<t.length;a+=4){const t=r(4294967296*(s||n.random()));s=987654071*t(),e[a/4]=4294967296*t()|0}return t}},C=class{constructor(t,e){this._prf=t,this._initIv=e,this._iv=e}reset(){this._iv=this._initIv}update(t){return this.calculate(this._prf,t,this._iv)}incWord(t){if(255==(t>>24&255)){let e=t>>16&255,n=t>>8&255,r=255&t;255===e?(e=0,255===n?(n=0,255===r?r=0:++r):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=r}else t+=1<<24;return t}incCounter(t){0===(t[0]=this.incWord(t[0]))&&(t[1]=this.incWord(t[1]))}calculate(t,e,n){let r;if(!(r=e.length))return[];const s=b.bitLength(e);for(let s=0;r>s;s+=4){this.incCounter(n);const r=t.encrypt(n);e[s]^=r[0],e[s+1]^=r[1],e[s+2]^=r[2],e[s+3]^=r[3]}return b.clamp(e,s)}},I={importKey:t=>new I.hmacSha1(_.bytes.toBits(t)),pbkdf2(t,e,n,s){if(n=n||1e4,0>s||0>n)throw new r("invalid params to pbkdf2");const a=1+(s>>5)<<2;let i,o,l,h,f;const p=new ArrayBuffer(a),u=new c(p);let d=0;const g=b;for(e=_.bytes.toBits(e),f=1;(a||1)>d;f++){for(i=o=t.encrypt(g.concat(e,[f])),l=1;n>l;l++)for(o=t.encrypt(o),h=0;h<o.length;h++)i[h]^=o[h];for(l=0;(a||1)>d&&l<i.length;l++)u.setInt32(d,i[l]),d+=4}return p.slice(0,s/8)},hmacSha1:class{constructor(t){const e=this,n=e._hash=k.sha1,r=[[],[]],s=n.prototype.blockSize/32;e._baseHash=[new n,new n],t.length>s&&(t=n.hash(t));for(let e=0;s>e;e++)r[0][e]=909522486^t[e],r[1][e]=1549556828^t[e];e._baseHash[0].update(r[0]),e._baseHash[1].update(r[1]),e._resultHash=new n(e._baseHash[0])}reset(){const t=this;t._resultHash=new t._hash(t._baseHash[0]),t._updated=!1}update(t){this._updated=!0,this._resultHash.update(t)}digest(){const t=this,e=t._resultHash.finalize(),n=new t._hash(t._baseHash[1]).update(e).finalize();return t.reset(),n}encrypt(t){if(this._updated)throw new r("encrypt on already updated hmac called!");return this.update(t),this.digest(t)}}},B={name:"PBKDF2"},D=e.assign({hash:{name:"HMAC"}},B),T=e.assign({iterations:1e3,hash:{name:"SHA-1"}},B),V=["deriveBits"],E=[8,12,16],H=[16,24,32],K=[0,0,0,0],R=void 0!==f,A=R&&void 0!==f.subtle,x=_.bytes,P=S,W=C,L=I.hmacSha1;class U{constructor(t,n,r){e.assign(this,{password:t,signed:n,strength:r-1,pendingInput:new s(0)})}async append(e){const n=this;if(n.password){const s=O(e,0,E[n.strength]+2);await(async(t,e,n)=>{await F(t,n,O(e,0,E[t.strength]));const s=O(e,E[t.strength]),a=t.keys.passwordVerification;if(a[0]!=s[0]||a[1]!=s[1])throw new r("Invalid pasword")})(n,s,n.password),n.password=null,n.aesCtrGladman=new W(new P(n.keys.key),t.from(K)),n.hmac=new L(n.keys.authentication),e=O(e,E[n.strength]+2)}return M(n,e,new s(e.length-10-(e.length-10)%16),0,10,!0)}flush(){const t=this,e=t.pendingInput,n=O(e,0,e.length-10),r=O(e,e.length-10);let a=new s(0);if(n.length){const e=x.toBits(n);t.hmac.update(e);const r=t.aesCtrGladman.update(e);a=x.fromBits(r)}let i=!0;if(t.signed){const e=O(x.fromBits(t.hmac.digest()),0,10);for(let t=0;10>t;t++)e[t]!=r[t]&&(i=!1)}return{valid:i,data:a}}}class G{constructor(t,n){e.assign(this,{password:t,strength:n-1,pendingInput:new s(0)})}async append(e){const n=this;let r=new s(0);n.password&&(r=await(async(t,e)=>{const n=(r=new s(E[t.strength]),R&&"function"==typeof f.getRandomValues?f.getRandomValues(r):z.getRandomValues(r));var r;return await F(t,e,n),N(n,t.keys.passwordVerification)})(n,n.password),n.password=null,n.aesCtrGladman=new W(new P(n.keys.key),t.from(K)),n.hmac=new L(n.keys.authentication));const a=new s(r.length+e.length-e.length%16);return a.set(r,0),M(n,e,a,r.length,0)}flush(){const t=this;let e=new s(0);if(t.pendingInput.length){const n=t.aesCtrGladman.update(x.toBits(t.pendingInput));t.hmac.update(n),e=x.fromBits(n)}const n=O(x.fromBits(t.hmac.digest()),0,10);return{data:N(e,n),signature:n}}}function M(t,e,n,r,a,i){const o=e.length-a;let c;for(t.pendingInput.length&&(e=N(t.pendingInput,e),n=((t,e)=>{if(e&&e>t.length){const n=t;(t=new s(e)).set(n,0)}return t})(n,o-o%16)),c=0;o-16>=c;c+=16){const s=x.toBits(O(e,c,c+16));i&&t.hmac.update(s);const a=t.aesCtrGladman.update(s);i||t.hmac.update(a),n.set(x.fromBits(a),c+r)}return t.pendingInput=O(e,c),n}async function F(t,n,r){const a=(t=>{if(void 0===h){const e=new s((t=unescape(encodeURIComponent(t))).length);for(let n=0;n<e.length;n++)e[n]=t.charCodeAt(n);return e}return(new h).encode(t)})(n),i=await((t,e,n,r,s)=>R&&A&&"function"==typeof f.subtle.importKey?f.subtle.importKey("raw",e,n,!1,s):I.importKey(e))(0,a,D,0,V),o=await(async(t,e,n)=>R&&A&&"function"==typeof f.subtle.deriveBits?await f.subtle.deriveBits(t,e,n):I.pbkdf2(e,t.salt,T.iterations,n))(e.assign({salt:r},T),i,8*(2*H[t.strength]+2)),c=new s(o);t.keys={key:x.toBits(O(c,0,H[t.strength])),authentication:x.toBits(O(c,H[t.strength],2*H[t.strength])),passwordVerification:O(c,2*H[t.strength])}}function N(t,e){let n=t;return t.length+e.length&&(n=new s(t.length+e.length),n.set(t,0),n.set(e,t.length)),n}function O(t,e,n){return t.subarray(e,n)}class Y{constructor(t,n){e.assign(this,{password:t,passwordVerification:n}),Q(this,t)}append(t){const e=this;if(e.password){const n=q(e,t.subarray(0,12));if(e.password=null,n[11]!=e.passwordVerification)throw new r("Invalid pasword");t=t.subarray(12)}return q(e,t)}flush(){return{valid:!0,data:new s(0)}}}class j{constructor(t,n){e.assign(this,{password:t,passwordVerification:n}),Q(this,t)}append(t){const e=this;let n,r;if(e.password){e.password=null;const a=f.getRandomValues(new s(12));a[11]=e.passwordVerification,n=new s(t.length+a.length),n.set(J(e,a),0),r=12}else n=new s(t.length),r=0;return n.set(J(e,t),r),n}flush(){return{data:new s(0)}}}function q(t,e){const n=new s(e.length);for(let r=0;r<e.length;r++)n[r]=Z(t)^e[r],X(t,n[r]);return n}function J(t,e){const n=new s(e.length);for(let r=0;r<e.length;r++)n[r]=Z(t)^e[r],X(t,e[r]);return n}function Q(t,e){t.keys=[305419896,591751049,878082192],t.crcKey0=new m(t.keys[0]),t.crcKey2=new m(t.keys[2]);for(let n=0;n<e.length;n++)X(t,e.charCodeAt(n))}function X(t,e){t.crcKey0.append([e]),t.keys[0]=~t.crcKey0.get(),t.keys[1]=tt(t.keys[1]+$(t.keys[0])),t.keys[1]=tt(n.imul(t.keys[1],134775813)+1),t.crcKey2.append([t.keys[1]>>>24]),t.keys[2]=~t.crcKey2.get()}function Z(t){const e=2|t.keys[2];return $(n.imul(e,1^e)>>>8)}function $(t){return 255&t}function tt(t){return 4294967295&t}class et{constructor(t,{signature:n,password:r,signed:s,compressed:a,zipCrypto:i,passwordVerification:o,encryptionStrength:c},{chunkSize:l}){const h=!!r;e.assign(this,{signature:n,encrypted:h,signed:s,compressed:a,inflate:a&&new t({chunkSize:l}),crc32:s&&new m,zipCrypto:i,decrypt:h&&i?new Y(r,o):new U(r,s,c)})}async append(t){const e=this;return e.encrypted&&t.length&&(t=await e.decrypt.append(t)),e.compressed&&t.length&&(t=await e.inflate.append(t)),(!e.encrypted||e.zipCrypto)&&e.signed&&t.length&&e.crc32.append(t),t}async flush(){const t=this;let e,n=new s(0);if(t.encrypted){const e=t.decrypt.flush();if(!e.valid)throw new r("Invalid signature");n=e.data}if((!t.encrypted||t.zipCrypto)&&t.signed){const n=new c(new s(4).buffer);if(e=t.crc32.get(),n.setUint32(0,e),t.signature!=n.getUint32(0,!1))throw new r("Invalid signature")}return t.compressed&&(n=await t.inflate.append(n)||new s(0),await t.inflate.flush()),{data:n,signature:e}}}class nt{constructor(t,{encrypted:n,signed:r,compressed:s,level:a,zipCrypto:i,password:o,passwordVerification:c,encryptionStrength:l},{chunkSize:h}){e.assign(this,{encrypted:n,signed:r,compressed:s,deflate:s&&new t({level:a||5,chunkSize:h}),crc32:r&&new m,zipCrypto:i,encrypt:n&&i?new j(o,c):new G(o,l)})}async append(t){const e=this;let n=t;return e.compressed&&t.length&&(n=await e.deflate.append(t)),e.encrypted&&n.length&&(n=await e.encrypt.append(n)),(!e.encrypted||e.zipCrypto)&&e.signed&&t.length&&e.crc32.append(t),n}async flush(){const t=this;let e,n=new s(0);if(t.compressed&&(n=await t.deflate.flush()||new s(0)),t.encrypted){n=await t.encrypt.append(n);const r=t.encrypt.flush();e=r.signature;const a=new s(n.length+r.data.length);a.set(n,0),a.set(r.data,n.length),n=a}return t.encrypted&&!t.zipCrypto||!t.signed||(e=t.crc32.get()),{data:n,signature:e}}}const rt={init(t){t.scripts&&t.scripts.length&&importScripts.apply(void 0,t.scripts);const e=t.options;let n;self.initCodec&&self.initCodec(),e.codecType.startsWith("deflate")?n=self.Deflate:e.codecType.startsWith("inflate")&&(n=self.Inflate),st=((t,e,n)=>e.codecType.startsWith("deflate")?new nt(t,e,n):e.codecType.startsWith("inflate")?new et(t,e,n):void 0)(n,e,t.config)},append:async t=>({data:await st.append(t.data)}),flush:()=>st.flush()};let st;addEventListener("message",(async t=>{const e=t.data,n=e.type,r=rt[n];if(r)try{e.data&&(e.data=new s(e.data));const t=await r(e)||{};if(t.type=n,t.data)try{t.data=t.data.buffer,p(t,[t.data])}catch(e){p(t)}else p(t)}catch(t){p({type:n,error:{message:t.message,stack:t.stack}})}}));var at=s,it=a,ot=i,ct=new at([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),lt=new at([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ht=new at([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ft=(t,e)=>{for(var n=new it(31),r=0;31>r;++r)n[r]=e+=1<<t[r-1];var s=new ot(n[30]);for(r=1;30>r;++r)for(var a=n[r];a<n[r+1];++a)s[a]=a-n[r]<<5|r;return[n,s]},pt=ft(ct,2),ut=pt[0],dt=pt[1];ut[28]=258,dt[258]=28;for(var gt=ft(lt,0),wt=gt[0],yt=gt[1],vt=new it(32768),mt=0;32768>mt;++mt){var bt=(43690&mt)>>>1|(21845&mt)<<1;bt=(61680&(bt=(52428&bt)>>>2|(13107&bt)<<2))>>>4|(3855&bt)<<4,vt[mt]=((65280&bt)>>>8|(255&bt)<<8)>>>1}var _t=(t,e,n)=>{for(var r=t.length,s=0,a=new it(e);r>s;++s)t[s]&&++a[t[s]-1];var i,o=new it(e);for(s=0;e>s;++s)o[s]=o[s-1]+a[s-1]<<1;if(n){i=new it(1<<e);var c=15-e;for(s=0;r>s;++s)if(t[s])for(var l=s<<4|t[s],h=e-t[s],f=o[t[s]-1]++<<h,p=f|(1<<h)-1;p>=f;++f)i[vt[f]>>>c]=l}else for(i=new it(r),s=0;r>s;++s)t[s]&&(i[s]=vt[o[t[s]-1]++]>>>15-t[s]);return i},kt=new at(288);for(mt=0;144>mt;++mt)kt[mt]=8;for(mt=144;256>mt;++mt)kt[mt]=9;for(mt=256;280>mt;++mt)kt[mt]=7;for(mt=280;288>mt;++mt)kt[mt]=8;var St=new at(32);for(mt=0;32>mt;++mt)St[mt]=5;var zt=_t(kt,9,0),Ct=_t(kt,9,1),It=_t(St,5,0),Bt=_t(St,5,1),Dt=t=>{for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Tt=(t,e,n)=>{var r=e/8|0;return(t[r]|t[r+1]<<8)>>(7&e)&n},Vt=(t,e)=>{var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},Et=t=>(t+7)/8|0,Ht=(t,e,n)=>{(null==e||0>e)&&(e=0),(null==n||n>t.length)&&(n=t.length);var r=new(2==t.BYTES_PER_ELEMENT?it:4==t.BYTES_PER_ELEMENT?ot:at)(n-e);return r.set(t.subarray(e,n)),r},Kt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Rt=(t,e,n)=>{var s=new r(e||Kt[t]);if(s.code=t,r.captureStackTrace&&r.captureStackTrace(s,Rt),!n)throw s;return s},At=(t,e,n)=>{n<<=7&e;var r=e/8|0;t[r]|=n,t[r+1]|=n>>>8},xt=(t,e,n)=>{n<<=7&e;var r=e/8|0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},Pt=(t,e)=>{for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,a=n.slice();if(!s)return[Nt,0];if(1==s){var i=new at(n[0].s+1);return i[n[0].s]=1,[i,1]}n.sort(((t,e)=>t.f-e.f)),n.push({s:-1,f:25001});var o=n[0],c=n[1],l=0,h=1,f=2;for(n[0]={s:-1,f:o.f+c.f,l:o,r:c};h!=s-1;)o=n[n[l].f<n[f].f?l++:f++],c=n[l!=h&&n[l].f<n[f].f?l++:f++],n[h++]={s:-1,f:o.f+c.f,l:o,r:c};var p=a[0].s;for(r=1;s>r;++r)a[r].s>p&&(p=a[r].s);var u=new it(p+1),d=Wt(n[h-1],u,0);if(d>e){r=0;var g=0,w=d-e,y=1<<w;for(a.sort(((t,e)=>u[e.s]-u[t.s]||t.f-e.f));s>r;++r){var v=a[r].s;if(u[v]<=e)break;g+=y-(1<<d-u[v]),u[v]=e}for(g>>>=w;g>0;){var m=a[r].s;u[m]<e?g-=1<<e-u[m]++-1:++r}for(;r>=0&&g;--r){var b=a[r].s;u[b]==e&&(--u[b],++g)}d=e}return[new at(u),d]},Wt=(t,e,r)=>-1==t.s?n.max(Wt(t.l,e,r+1),Wt(t.r,e,r+1)):e[t.s]=r,Lt=t=>{for(var e=t.length;e&&!t[--e];);for(var n=new it(++e),r=0,s=t[0],a=1,i=t=>{n[r++]=t},o=1;e>=o;++o)if(t[o]==s&&o!=e)++a;else{if(!s&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(s),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(s);a=1,s=t[o]}return[n.subarray(0,r),e]},Ut=(t,e)=>{for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Gt=(t,e,n)=>{var r=n.length,s=Et(e+2);t[s]=255&r,t[s+1]=r>>>8,t[s+2]=255^t[s],t[s+3]=255^t[s+1];for(var a=0;r>a;++a)t[s+a+4]=n[a];return 8*(s+4+r)},Mt=(t,e,n,r,s,a,i,o,c,l,h)=>{At(e,h++,n),++s[256];for(var f=Pt(s,15),p=f[0],u=f[1],d=Pt(a,15),g=d[0],w=d[1],y=Lt(p),v=y[0],m=y[1],b=Lt(g),_=b[0],k=b[1],S=new it(19),z=0;z<v.length;++z)S[31&v[z]]++;for(z=0;z<_.length;++z)S[31&_[z]]++;for(var C=Pt(S,7),I=C[0],B=C[1],D=19;D>4&&!I[ht[D-1]];--D);var T,V,E,H,K=l+5<<3,R=Ut(s,kt)+Ut(a,St)+i,A=Ut(s,p)+Ut(a,g)+i+14+3*D+Ut(S,I)+(2*S[16]+3*S[17]+7*S[18]);if(R>=K&&A>=K)return Gt(e,h,t.subarray(c,c+l));if(At(e,h,1+(R>A)),h+=2,R>A){T=_t(p,u,0),V=p,E=_t(g,w,0),H=g;var x=_t(I,B,0);for(At(e,h,m-257),At(e,h+5,k-1),At(e,h+10,D-4),h+=14,z=0;D>z;++z)At(e,h+3*z,I[ht[z]]);h+=3*D;for(var P=[v,_],W=0;2>W;++W){var L=P[W];for(z=0;z<L.length;++z){var U=31&L[z];At(e,h,x[U]),h+=I[U],U>15&&(At(e,h,L[z]>>>5&127),h+=L[z]>>>12)}}}else T=zt,V=kt,E=It,H=St;for(z=0;o>z;++z)if(r[z]>255){U=r[z]>>>18&31,xt(e,h,T[U+257]),h+=V[U+257],U>7&&(At(e,h,r[z]>>>23&31),h+=ct[U]);var G=31&r[z];xt(e,h,E[G]),h+=H[G],G>3&&(xt(e,h,r[z]>>>5&8191),h+=lt[G])}else xt(e,h,T[r[z]]),h+=V[r[z]];return xt(e,h,T[256]),h+V[256]},Ft=new ot([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Nt=new at(0),Ot=function(){function t(t,e){e||"function"!=typeof t||(e=t,t={}),this.ondata=e,this.o=t||{}}return t.prototype.p=function(t,e){var r,s,a;this.ondata((0,0,a=!e,((t,e,r,s,a,i)=>{var o=t.length,c=new at(0+o+5*(1+n.ceil(o/7e3))+0),l=c.subarray(0,c.length-0),h=0;if(!e||8>o)for(var f=0;o>=f;f+=65535){var p=f+65535;o>p||(l[h>>3]=i),h=Gt(l,h+1,t.subarray(f,p))}else{for(var u=Ft[e-1],d=u>>>13,g=8191&u,w=(1<<r)-1,y=new it(32768),v=new it(w+1),m=n.ceil(r/3),b=2*m,_=e=>(t[e]^t[e+1]<<m^t[e+2]<<b)&w,k=new ot(25e3),S=new it(288),z=new it(32),C=0,I=0,B=(f=0,0),D=0,T=0;o>f;++f){var V=_(f),E=32767&f,H=v[V];if(y[E]=H,v[V]=E,f>=D){var K=o-f;if((C>7e3||B>24576)&&K>423){h=Mt(t,l,0,k,S,z,I,B,T,f-T,h),B=C=I=0,T=f;for(var R=0;286>R;++R)S[R]=0;for(R=0;30>R;++R)z[R]=0}var A=2,x=0,P=g,W=E-H&32767;if(K>2&&V==_(f-W))for(var L=n.min(d,K)-1,U=n.min(32767,f),G=n.min(258,K);U>=W&&--P&&E!=H;){if(t[f+A]==t[f+A-W]){for(var M=0;G>M&&t[f+M]==t[f+M-W];++M);if(M>A){if(A=M,x=W,M>L)break;var F=n.min(W,M-2),N=0;for(R=0;F>R;++R){var O=f-W+R+32768&32767,Y=O-y[O]+32768&32767;Y>N&&(N=Y,H=O)}}}W+=(E=H)-(H=y[E])+32768&32767}if(x){k[B++]=268435456|dt[A]<<18|yt[x];var j=31&dt[A],q=31&yt[x];I+=ct[j]+lt[q],++S[257+j],++z[q],D=f+A,++C}else k[B++]=t[f],++S[t[f]]}}h=Mt(t,l,i,k,S,z,I,B,T,f-T,h),!i&&7&h&&(h=Gt(l,h+1,Nt))}return Ht(c,0,0+Et(h)+0)})(r=t,null==(s=this.o).level?6:s.level,null==s.mem?n.ceil(1.5*n.max(8,n.min(13,n.log(r.length)))):12+s.mem,0,0,!a)),e)},t.prototype.push=function(t,e){this.ondata||Rt(5),this.d&&Rt(4),this.d=e,this.p(t,e||!1)},t}(),Yt=function(){function t(t){this.s={},this.p=new at(0),this.ondata=t}return t.prototype.e=function(t){this.ondata||Rt(5),this.d&&Rt(4);var e=this.p.length,n=new at(e+t.length);n.set(this.p),n.set(t,e),this.p=n},t.prototype.c=function(t){this.d=this.s.i=t||!1;var e=this.s.b,r=((t,e,r)=>{var s=t.length;if(!s||r&&r.f&&!r.l)return e||new at(0);var a=!e||r,i=!r||r.i;r||(r={}),e||(e=new at(3*s));var o=t=>{var r=e.length;if(t>r){var s=new at(n.max(2*r,t));s.set(e),e=s}},c=r.f||0,l=r.p||0,h=r.b||0,f=r.l,p=r.d,u=r.m,d=r.n,g=8*s;do{if(!f){c=Tt(t,l,1);var w=Tt(t,l+1,3);if(l+=3,!w){var y=t[(D=Et(l)+4)-4]|t[D-3]<<8,v=D+y;if(v>s){i&&Rt(0);break}a&&o(h+y),e.set(t.subarray(D,v),h),r.b=h+=y,r.p=l=8*v,r.f=c;continue}if(1==w)f=Ct,p=Bt,u=9,d=5;else if(2==w){var m=Tt(t,l,31)+257,b=Tt(t,l+10,15)+4,_=m+Tt(t,l+5,31)+1;l+=14;for(var k=new at(_),S=new at(19),z=0;b>z;++z)S[ht[z]]=Tt(t,l+3*z,7);l+=3*b;var C=Dt(S),I=(1<<C)-1,B=_t(S,C,1);for(z=0;_>z;){var D,T=B[Tt(t,l,I)];if(l+=15&T,16>(D=T>>>4))k[z++]=D;else{var V=0,E=0;for(16==D?(E=3+Tt(t,l,3),l+=2,V=k[z-1]):17==D?(E=3+Tt(t,l,7),l+=3):18==D&&(E=11+Tt(t,l,127),l+=7);E--;)k[z++]=V}}var H=k.subarray(0,m),K=k.subarray(m);u=Dt(H),d=Dt(K),f=_t(H,u,1),p=_t(K,d,1)}else Rt(1);if(l>g){i&&Rt(0);break}}a&&o(h+131072);for(var R=(1<<u)-1,A=(1<<d)-1,x=l;;x=l){var P=(V=f[Vt(t,l)&R])>>>4;if((l+=15&V)>g){i&&Rt(0);break}if(V||Rt(2),256>P)e[h++]=P;else{if(256==P){x=l,f=null;break}var W=P-254;if(P>264){var L=ct[z=P-257];W=Tt(t,l,(1<<L)-1)+ut[z],l+=L}var U=p[Vt(t,l)&A],G=U>>>4;if(U||Rt(3),l+=15&U,K=wt[G],G>3&&(L=lt[G],K+=Vt(t,l)&(1<<L)-1,l+=L),l>g){i&&Rt(0);break}a&&o(h+131072);for(var M=h+W;M>h;h+=4)e[h]=e[h-K],e[h+1]=e[h+1-K],e[h+2]=e[h+2-K],e[h+3]=e[h+3-K];h=M}}r.l=f,r.p=x,r.b=h,r.f=c,f&&(c=1,r.m=u,r.d=p,r.n=d)}while(!c);return h==e.length?e:Ht(e,0,h)})(this.p,this.o,this.s);this.ondata(Ht(r,e,this.s.b),this.d),this.o=Ht(r,this.s.b-32768),this.s.b=this.o.length,this.p=Ht(this.p,this.s.p/8|0),this.s.p&=7},t.prototype.push=function(t,e){this.e(t),this.c(e)},t}(),jt="undefined"!=typeof TextDecoder&&new TextDecoder;try{jt.decode(Nt,{stream:!0})}catch(t){}function qt(t,n,r){return class{constructor(a){const i=this;i.codec=new t(e.assign({},n,a)),r(i.codec,(t=>{if(i.pendingData){const e=i.pendingData;i.pendingData=new s(e.length+t.length),i.pendingData.set(e,0),i.pendingData.set(t,e.length)}else i.pendingData=new s(t)}))}append(t){return this.codec.push(t),a(this)}flush(){return this.codec.push(new s(0),!0),a(this)}};function a(t){if(t.pendingData){const e=t.pendingData;return t.pendingData=null,e}return new s(0)}}const{Deflate:Jt,Inflate:Qt}=((t,e={},n)=>({Deflate:qt(t.Deflate,e.deflate,n),Inflate:qt(t.Inflate,e.inflate,n)}))({Deflate:Ot,Inflate:Yt},void 0,((t,e)=>t.ondata=e));self.initCodec=()=>{self.Deflate=Jt,self.Inflate=Qt};\n'],{type:"text/javascript"}));t({workerScripts:{inflate:[e],deflate:[e]}})}})(T);export{Kt as BlobReader,Pt as BlobWriter,Lt as Data64URIReader,Vt as Data64URIWriter,Ft as ERR_ABORT,ge as ERR_BAD_FORMAT,be as ERR_CENTRAL_DIRECTORY_NOT_FOUND,Ve as ERR_DUPLICATED_NAME,ze as ERR_ENCRYPTED,me as ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND,we as ERR_EOCDR_NOT_FOUND,ye as ERR_EOCDR_ZIP64_NOT_FOUND,ke as ERR_EXTRAFIELD_ZIP64_NOT_FOUND,Ct as ERR_HTTP_RANGE,Ke as ERR_INVALID_COMMENT,qe as ERR_INVALID_ENCRYPTION_STRENGTH,Pe as ERR_INVALID_ENTRY_COMMENT,Ge as ERR_INVALID_ENTRY_NAME,Ze as ERR_INVALID_EXTRAFIELD_DATA,Ne as ERR_INVALID_EXTRAFIELD_TYPE,G as ERR_INVALID_PASSWORD,mt as ERR_INVALID_SIGNATURE,Oe as ERR_INVALID_VERSION,ve as ERR_LOCAL_FILE_HEADER_NOT_FOUND,Bt as ERR_NOT_SEEKABLE_READER,Se as ERR_UNSUPPORTED_COMPRESSION,_e as ERR_UNSUPPORTED_ENCRYPTION,je as ERR_UNSUPPORTED_FORMAT,ie as HttpRangeReader,ae as HttpReader,qt as ReadableStreamReader,Wt as Reader,It as TextReader,Mt as TextWriter,oe as Uint8ArrayReader,ce as Uint8ArrayWriter,Nt as WritableStreamWriter,Ht as Writer,De as ZipReader,Qe as ZipWriter,T as configure,R as getMimeType,E as initShimAsyncCodec,At as terminateWorkers};
